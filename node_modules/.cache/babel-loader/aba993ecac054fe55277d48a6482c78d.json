{"remainingRequest":"/Users/lebronchao/Desktop/Web Project/Big_Data_Visualization/node_modules/babel-loader/lib/index.js!/Users/lebronchao/Desktop/Web Project/Big_Data_Visualization/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/lebronchao/Desktop/Web Project/Big_Data_Visualization/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lebronchao/Desktop/Web Project/Big_Data_Visualization/src/components/UserManagement/Personal/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lebronchao/Desktop/Web Project/Big_Data_Visualization/src/components/UserManagement/Personal/index.vue","mtime":1600049283131},{"path":"/Users/lebronchao/Desktop/Web Project/Big_Data_Visualization/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lebronchao/Desktop/Web Project/Big_Data_Visualization/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/lebronchao/Desktop/Web Project/Big_Data_Visualization/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lebronchao/Desktop/Web Project/Big_Data_Visualization/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IGNoYW5nZVVzZXJJbmZvIH0gZnJvbSAnLi4vLi4vLi4vYXBpL1VzZXJNYW5hZ2VtZW50JzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJpbmRleCIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIC8v6I635Y+W5Liq5Lq655So5oi35L+h5oGvCiAgICAgIHVzZXI6IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2JkaV9pb3RfdXNlcicpKSwKICAgICAgLy/mmK/lkKbnvJbovpHnirbmgIHlj5jph48KICAgICAgaWZFZGl0OiBmYWxzZQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8v5byA5aeL57yW6L6RCiAgICBlZGl0TXk6IGZ1bmN0aW9uIGVkaXRNeSgpIHsKICAgICAgdGhpcy5pZkVkaXQgPSB0cnVlOwogICAgfSwKICAgIC8v5Y+W5raI57yW6L6RCiAgICBjYW5jZWw6IGZ1bmN0aW9uIGNhbmNlbCgpIHsKICAgICAgdGhpcy51c2VyID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYmRpX2lvdF91c2VyJykpOwogICAgICB0aGlzLmlmRWRpdCA9IGZhbHNlOwogICAgfSwKICAgIC8v56Gu6K6k5o+Q5Lqk5L+u5pS5IOajgOafpei+k+WFpemhueWQiOazleWQjuWPkei1t+S/ruaUueeUqOaIt+S/oeaBr+ivt+axggogICAgY29uZmlybU15OiBmdW5jdGlvbiBjb25maXJtTXkoKSB7CiAgICAgIHZhciBlcnJtc2cgPSAnJzsKICAgICAgdmFyIGJvb2wxID0gL15bYS16QS1aMC05XVx3ezUsMTB9JC8udGVzdCh0aGlzLnVzZXIuaWQpOwogICAgICB2YXIgYm9vbDIgPSAvXjFbMy05XVxkezl9JC8udGVzdCh0aGlzLnVzZXIubnVtYmVyKTsKCiAgICAgIGlmICghYm9vbDEpIHsKICAgICAgICBlcnJtc2cgKz0gJ2lk5LiN5ZCI5rOVLOivt+i+k+WFpTYtMTDkvY3lrZfmr43mlbDlrZfmiJbkuIvliJLnur8uJzsKICAgICAgfQoKICAgICAgaWYgKCFib29sMikgewogICAgICAgIGVycm1zZyArPSAn5omL5py65Y+35LiN5ZCI5rOVLOivt+mHjeaWsOi+k+WFpS4nOwogICAgICB9CgogICAgICBpZiAoIXRoaXMudXNlci5uYW1lIHx8ICF0aGlzLnVzZXIubm5hbWUgfHwgIXRoaXMudXNlci5nZW5kZXIpIHsKICAgICAgICBlcnJtc2cgKz0gJ+i+k+WFpemhueS4jeiDveS4uuepui4nOwogICAgICB9CgogICAgICBpZiAoYm9vbDEgJiYgYm9vbDIgJiYgdGhpcy51c2VyLm5hbWUgJiYgdGhpcy51c2VyLm5uYW1lICYmIHRoaXMudXNlci5nZW5kZXIpIHsKICAgICAgICBjaGFuZ2VVc2VySW5mbyh0aGlzLCBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdiZGlfaW90X3VzZXInKSkuaWQsIHRoaXMudXNlcik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYWxlcnQoJ+S/ruaUueWksei0pSEnICsgZXJybXNnKTsKICAgICAgfQogICAgfSwKICAgIC8v5L6b57uZ5o6l5Y+j6LCD55SoICDliKTmlq3kuKrkurrkv6Hmga/mmK/lkKbkv67mlLnmiJDlip8KICAgIGNoYW5nZTogZnVuY3Rpb24gY2hhbmdlKGJvb2wsIGVycm1zZykgewogICAgICBpZiAoYm9vbCkgewogICAgICAgIGFsZXJ0KCfkv67mlLnmiJDlip/vvIEnKTsKICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYmRpX2lvdF91c2VyJywgSlNPTi5zdHJpbmdpZnkodGhpcy51c2VyKSk7CiAgICAgICAgdGhpcy5pZkVkaXQgPSBmYWxzZTsKICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oMCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYWxlcnQoJ+S/ruaUueWksei0pe+8gScgKyBlcnJtc2cpOwogICAgICAgIHRoaXMudXNlciA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2JkaV9pb3RfdXNlcicpKTsKICAgICAgICB0aGlzLmlmRWRpdCA9IGZhbHNlOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkDA,SAAA,cAAA,QAAA,6BAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,OADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA;AACA,MAAA,IAAA,EAAA,IAAA,CAAA,KAAA,CAAA,YAAA,CAAA,OAAA,CAAA,cAAA,CAAA,CAFA;AAGA;AACA,MAAA,MAAA,EAAA;AAJA,KAAA;AAMA,GATA;AAUA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,MAFA,oBAEA;AACA,WAAA,MAAA,GAAA,IAAA;AACA,KAJA;AAKA;AACA,IAAA,MANA,oBAMA;AACA,WAAA,IAAA,GAAA,IAAA,CAAA,KAAA,CAAA,YAAA,CAAA,OAAA,CAAA,cAAA,CAAA,CAAA;AACA,WAAA,MAAA,GAAA,KAAA;AACA,KATA;AAUA;AACA,IAAA,SAXA,uBAWA;AACA,UAAA,MAAA,GAAA,EAAA;AACA,UAAA,KAAA,GAAA,wBAAA,IAAA,CAAA,KAAA,IAAA,CAAA,EAAA,CAAA;AACA,UAAA,KAAA,GAAA,gBAAA,IAAA,CAAA,KAAA,IAAA,CAAA,MAAA,CAAA;;AACA,UAAA,CAAA,KAAA,EAAA;AACA,QAAA,MAAA,IAAA,yBAAA;AACA;;AACA,UAAA,CAAA,KAAA,EAAA;AACA,QAAA,MAAA,IAAA,eAAA;AACA;;AACA,UAAA,CAAA,KAAA,IAAA,CAAA,IAAA,IAAA,CAAA,KAAA,IAAA,CAAA,KAAA,IAAA,CAAA,KAAA,IAAA,CAAA,MAAA,EAAA;AACA,QAAA,MAAA,IAAA,UAAA;AACA;;AACA,UAAA,KAAA,IAAA,KAAA,IAAA,KAAA,IAAA,CAAA,IAAA,IAAA,KAAA,IAAA,CAAA,KAAA,IAAA,KAAA,IAAA,CAAA,MAAA,EAAA;AACA,QAAA,cAAA,CAAA,IAAA,EAAA,IAAA,CAAA,KAAA,CAAA,YAAA,CAAA,OAAA,CAAA,cAAA,CAAA,EAAA,EAAA,EAAA,KAAA,IAAA,CAAA;AACA,OAFA,MAEA;AACA,QAAA,KAAA,CAAA,UAAA,MAAA,CAAA;AACA;AACA,KA7BA;AA8BA;AACA,IAAA,MA/BA,kBA+BA,IA/BA,EA+BA,MA/BA,EA+BA;AACA,UAAA,IAAA,EAAA;AACA,QAAA,KAAA,CAAA,OAAA,CAAA;AACA,QAAA,YAAA,CAAA,OAAA,CAAA,cAAA,EAAA,IAAA,CAAA,SAAA,CAAA,KAAA,IAAA,CAAA;AACA,aAAA,MAAA,GAAA,KAAA;AACA,aAAA,OAAA,CAAA,EAAA,CAAA,CAAA;AACA,OALA,MAKA;AACA,QAAA,KAAA,CAAA,UAAA,MAAA,CAAA;AACA,aAAA,IAAA,GAAA,IAAA,CAAA,KAAA,CAAA,YAAA,CAAA,OAAA,CAAA,cAAA,CAAA,CAAA;AACA,aAAA,MAAA,GAAA,KAAA;AACA;AACA;AA1CA;AAVA,CAAA","sourcesContent":["<template>\n<div>\n  <div class=\"row\" style=\"border-bottom: 0.1rem solid #F1F1F3;padding-bottom: 2rem\">\n    <img src=\"../../../assets/img/头像.jpg\" alt=\"用户头像\" class=\"user-img\">\n    <div class=\"col\" style=\"margin:0 0 0 2rem;\">\n      <input type=\"text\" class=\"user-nname\" style=\"width: 8rem\" v-model=\"user.nname\" v-if=\"ifEdit\"/>\n      <div class=\"user-nname\" style=\"width: 8rem\" v-else>{{ user.nname }}</div>\n      <div class=\"user-id row\" v-if=\"ifEdit\">\n        <div class=\"row\" style=\"width: 3rem\">用户名:</div>\n        <input type=\"text\" class=\"user-id\" v-model=\"user.id\"/>\n      </div>\n      <div class=\"user-id\" v-else>用户名:{{ user.id }}</div>\n      <div class=\"user-admin\" v-if=\"user.jurisdiction==0\">管理员</div>\n      <div class=\"user-admin\" style=\"background:#3B86FF;color: white\" v-else-if=\"user.jurisdiction==1\">V I P</div>\n    </div>\n    <div class=\"row\" style=\"margin-top: 2.68rem\">\n      <div class=\"user-info-container col\" style=\"width: 6rem\">\n        <div class=\"user-info-title\">姓名：</div>\n        <input class=\"user-info-text\" v-model=\"user.name\" v-if=\"ifEdit\"/>\n        <div class=\"user-info-text\" v-else>{{ user.name }}</div>\n      </div>\n      <div class=\"user-info-container col\" style=\"width: 6rem\">\n        <div class=\"user-info-title\">性别：</div>\n        <select class=\"user-info-text\" v-model=\"user.gender\" v-if=\"ifEdit\">\n          <option value=\"男\">男</option>\n          <option value=\"女\">女</option>\n        </select>\n        <div class=\"user-info-text\" v-else>{{ user.gender }}</div>\n      </div>\n      <div class=\"user-info-container col\" style=\"width: 6rem\">\n        <div class=\"user-info-title\">手机号：</div>\n        <input class=\"user-info-text\" v-model=\"user.number\" v-if=\"ifEdit\"/>\n        <div class=\"user-info-text\" v-else>{{ user.number }}</div>\n      </div>\n    </div>\n    <div style=\"width: 100%;display: flex;justify-content: flex-end\">\n      <div class=\"col\">\n        <div class=\"user-top-title\" style=\"display: flex;justify-content: flex-end\">个人资料</div>\n        <div class=\"row\">\n          <button class=\"user-top-button-confirm\" @click=\"confirmMy\" v-if=\"ifEdit\">提交</button>\n          <button class=\"user-top-button-confirm\" @click=\"cancel\" v-if=\"ifEdit\" style=\"background: red;margin-left: 0.6rem\">取消</button>\n        </div>\n        <button class=\"user-top-button\" @click=\"editMy\" v-if=\"!ifEdit\">编辑我的资料</button>\n      </div>\n    </div>\n  </div>\n</div>\n</template>\n\n<script>\nimport {changeUserInfo} from '../../../api/UserManagement'\nexport default {\n  name: \"index\",\n  data() {\n    return {\n      //获取个人用户信息\n      user: JSON.parse(localStorage.getItem('bdi_iot_user')),\n      //是否编辑状态变量\n      ifEdit: false,\n    }\n  },\n  methods: {\n    //开始编辑\n    editMy() {\n      this.ifEdit = true\n    },\n    //取消编辑\n    cancel(){\n      this.user=JSON.parse(localStorage.getItem('bdi_iot_user'))\n      this.ifEdit = false\n    },\n    //确认提交修改 检查输入项合法后发起修改用户信息请求\n    confirmMy() {\n      let errmsg=''\n      let bool1=/^[a-zA-Z0-9]\\w{5,10}$/.test(this.user.id)\n      let bool2=/^1[3-9]\\d{9}$/.test(this.user.number)\n      if(!bool1){\n        errmsg+='id不合法,请输入6-10位字母数字或下划线.'\n      }\n      if(!bool2){\n        errmsg+='手机号不合法,请重新输入.'\n      }\n      if(!this.user.name || !this.user.nname || !this.user.gender){\n        errmsg+='输入项不能为空.'\n      }\n      if(bool1 && bool2 && this.user.name && this.user.nname && this.user.gender){\n        changeUserInfo(this,JSON.parse(localStorage.getItem('bdi_iot_user')).id,this.user)\n      }else{\n        alert('修改失败!'+errmsg)\n      }\n    },\n    //供给接口调用  判断个人信息是否修改成功\n    change(bool,errmsg){\n      if(bool){\n        alert('修改成功！')\n        localStorage.setItem('bdi_iot_user',JSON.stringify(this.user))\n        this.ifEdit = false\n        this.$router.go(0)\n      }else{\n        alert('修改失败！'+errmsg)\n        this.user=JSON.parse(localStorage.getItem('bdi_iot_user'))\n        this.ifEdit = false\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.row {\n  display: flex;\n  flex-direction: row;\n}\n\n.col {\n  display: flex;\n  flex-direction: column;\n}\n\n.user-img {\n  height: 5.81rem;\n  width: 5.81rem;\n  border-radius: 100%;\n}\n\n.user-nname {\n  font-size: 1.36rem;\n  color: #43425D;\n  margin-bottom: 0.67rem;\n}\n\n.user-id {\n  font-size: 0.78rem;\n  color: #43425D;\n  margin-bottom: 0.66rem;\n}\n\n.user-admin {\n  width: 5rem;\n  height: 1.62rem;\n  font-size: 0.74rem;\n  border-radius: 1rem;\n  background: #FFCA83;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.user-info-container {\n  margin-left: 3.86rem;\n}\n\n.user-info-title {\n  color: #4D4F5C;\n  font-size: 1rem;\n  font-weight: bold;\n}\n\n.user-info-text {\n  color: #4D4F5C;\n  font-size: 0.87rem;\n  margin-top: 0.6rem;\n}\n\n.user-top-title {\n  font-size: 1.89rem;\n  color: #43425D;\n  margin-bottom: 1.82rem;\n}\n\n.user-top-button {\n  width: 8.85rem;\n  height: 2.36rem;\n  font-size: 1rem;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: #4D4F5C;\n  border: 0.06rem solid #4D4F5C;\n  background: white;\n  border-radius: 0.3rem;\n}\n\n.user-top-button-confirm {\n  width: 4.46rem;\n  height: 2.36rem;\n  font-size: 1rem;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: white;\n  border: 0.06rem solid #3B86FF;\n  background: #3B86FF;\n  border-radius: 0.3rem;\n}\n</style>"],"sourceRoot":"src/components/UserManagement/Personal"}]}