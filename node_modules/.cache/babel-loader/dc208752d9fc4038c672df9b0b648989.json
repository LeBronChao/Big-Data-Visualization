{"remainingRequest":"/Users/lebronchao/Desktop/Web Project/Big_Data_Visualization/node_modules/thread-loader/dist/cjs.js!/Users/lebronchao/Desktop/Web Project/Big_Data_Visualization/node_modules/babel-loader/lib/index.js!/Users/lebronchao/Desktop/Web Project/Big_Data_Visualization/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/lebronchao/Desktop/Web Project/Big_Data_Visualization/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lebronchao/Desktop/Web Project/Big_Data_Visualization/src/components/UserManagement/Manage/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lebronchao/Desktop/Web Project/Big_Data_Visualization/src/components/UserManagement/Manage/index.vue","mtime":1600743883581},{"path":"/Users/lebronchao/Desktop/Web Project/Big_Data_Visualization/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lebronchao/Desktop/Web Project/Big_Data_Visualization/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lebronchao/Desktop/Web Project/Big_Data_Visualization/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/lebronchao/Desktop/Web Project/Big_Data_Visualization/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lebronchao/Desktop/Web Project/Big_Data_Visualization/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgZ2V0VXNlckxpc3QsIHF1ZXJ5VXNlckJ5SWQsIGRlbGV0ZVVzZXIsIGNoYW5nZVVzZXJJbmZvIH0gZnJvbSAnLi4vLi4vLi4vYXBpL1VzZXJNYW5hZ2VtZW50JzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJpbmRleCIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIC8v55So5oi35YiX6KGo5pWw57uECiAgICAgIHVzZXJMaXN0OiBbXSwKICAgICAgLy/pgJrov4fovpPlhaVJROafpeaJvueUqOaIt19pZAogICAgICBpbnB1dElkOiAnJywKICAgICAgLy/ku45sb2NhbHN0b3JlZ2Xor7vlj5bnlKjmiLfmnYPpmZAKICAgICAganVyaXNkaWN0aW9uOiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdiZGlfaW90X3VzZXInKSkuanVyaXNkaWN0aW9uCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgLy/mn6Xmib7nlKjmiLfor7fmsYIKICAgIHF1ZXJ5VXNlcjogZnVuY3Rpb24gcXVlcnlVc2VyKCkgewogICAgICBxdWVyeVVzZXJCeUlkKHRoaXMsIHRoaXMuaW5wdXRJZCk7CiAgICB9LAogICAgLy/kv67mlLnnlKjmiLfkv6Hmga/lkI7mo4Dmn6XmmK/lkKblkIjms5Xlubbmj5DkuqQKICAgIHVzZXJTdWJtaXQ6IGZ1bmN0aW9uIHVzZXJTdWJtaXQoaW5kZXgpIHsKICAgICAgdmFyIGVycm1zZyA9ICcnOwogICAgICB2YXIgYm9vbDEgPSAvXlthLXpBLVowLTldXHd7NSwxMH0kLy50ZXN0KHRoaXMudXNlckxpc3RbaW5kZXhdLmlkKTsKICAgICAgdmFyIGJvb2wyID0gL14xWzMtOV1cZHs5fSQvLnRlc3QodGhpcy51c2VyTGlzdFtpbmRleF0ubnVtYmVyKTsKCiAgICAgIGlmICghYm9vbDEpIHsKICAgICAgICBlcnJtc2cgKz0gJ2lk5LiN5ZCI5rOVLOivt+i+k+WFpTYtMTDkvY3lrZfmr43mlbDlrZfmiJbkuIvliJLnur8uJzsKICAgICAgfQoKICAgICAgaWYgKCFib29sMikgewogICAgICAgIGVycm1zZyArPSAn5omL5py65Y+35LiN5ZCI5rOVLOivt+mHjeaWsOi+k+WFpS4nOwogICAgICB9CgogICAgICBpZiAoYm9vbDEgJiYgYm9vbDIpIHsKICAgICAgICBjaGFuZ2VVc2VySW5mbyh0aGlzLCBKU09OLnBhcnNlKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2JkaV9pb3RfdXNlckxpc3QnKSlbaW5kZXhdLmlkLCB0aGlzLnVzZXJMaXN0W2luZGV4XSk7CiAgICAgICAgdGhpcy51c2VyTGlzdFtpbmRleF0uaWZFZGl0ID0gZmFsc2U7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYWxlcnQoJ+S/ruaUueWksei0pSEnICsgZXJybXNnKTsKICAgICAgfQogICAgfSwKICAgIC8v5L6b57uZ5o6l5Y+j6LCD55SoICDliKTmlq3mmK/lkKbkv67mlLnmiJDlip8KICAgIGNoYW5nZTogZnVuY3Rpb24gY2hhbmdlKGJvb2wsIGVycm1zZykgewogICAgICBpZiAoYm9vbCkgewogICAgICAgIGFsZXJ0KCfkv67mlLnmiJDlip/vvIEnKTsKICAgICAgICB0aGlzLmdldFVzZXIoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBhbGVydCgn5L+u5pS55aSx6LSl77yBJyArIGVycm1zZyk7CiAgICAgIH0KICAgIH0sCiAgICAvL+e8lui+keeUqOaIt+WPkei1t+WHveaVsAogICAgdXNlckVkaXQ6IGZ1bmN0aW9uIHVzZXJFZGl0KGluZGV4KSB7CiAgICAgIHRoaXMudXNlckxpc3RbaW5kZXhdLmlmRWRpdCA9IHRydWU7CiAgICAgIHRoaXMuJGZvcmNlVXBkYXRlKCk7CiAgICB9LAogICAgLy/lj5bmtojnvJbovpHnlKjmiLcgIOaBouWkjeeUqOaIt+S/oeaBrwogICAgdXNlckNhbmNlbDogZnVuY3Rpb24gdXNlckNhbmNlbChpbmRleCkgewogICAgICB0aGlzLnVzZXJMaXN0W2luZGV4XSA9IEpTT04ucGFyc2Uoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnYmRpX2lvdF91c2VyTGlzdCcpKVtpbmRleF07CiAgICAgIHRoaXMudXNlckxpc3RbaW5kZXhdLmlmRWRpdCA9IGZhbHNlOwogICAgICB0aGlzLiRmb3JjZVVwZGF0ZSgpOwogICAgfSwKICAgIC8v5Yig6Zmk55So5oi35Y+R6LW35Ye95pWwCiAgICB1c2VyRGVsZXRlOiBmdW5jdGlvbiB1c2VyRGVsZXRlKGluZGV4KSB7CiAgICAgIHZhciB0ZW1wID0gY29uZmlybSgiXHU0RjYwXHU3ODZFXHU4QkE0XHU4OTgxXHU1MjIwXHU5NjY0XHU3NTI4XHU2MjM3Ii5jb25jYXQodGhpcy51c2VyTGlzdFtpbmRleF0uaWQsICJcdTU0MTdcdUZGMUYiKSk7CgogICAgICBpZiAodGVtcCkgewogICAgICAgIGRlbGV0ZVVzZXIodGhpcy51c2VyTGlzdFtpbmRleF0uaWQsIHRoaXMpOwogICAgICB9CiAgICB9LAogICAgLy/ojrflj5bnlKjmiLfliJfooajor7fmsYIKICAgIGdldFVzZXI6IGZ1bmN0aW9uIGdldFVzZXIoKSB7CiAgICAgIGlmICh0aGlzLmp1cmlzZGljdGlvbiA9PSAwKSB7CiAgICAgICAgZ2V0VXNlckxpc3QodGhpcyk7CiAgICAgIH0KICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7fSwKICB3YXRjaDogewogICAgLy/oi6XpgJrov4dpZOafpeaJvueUqOaIt+eahGlk5YC85Li656m677yM5Y+R6LW36I635Y+W5omA5pyJ55So5oi35YiX6KGo6K+35rGCCiAgICBpbnB1dElkOiB7CiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIobmV3VmFsKSB7CiAgICAgICAgaWYgKG5ld1ZhbCA9PSAnJykgewogICAgICAgICAgdGhpcy5nZXRVc2VyKCk7CiAgICAgICAgfQogICAgICB9LAogICAgICBkZWVwOiB0cnVlLAogICAgICBpbW1lZGlhdGU6IHRydWUKICAgIH0KICB9Cn07"},{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <div class=\"user-bottom\" v-if=\"jurisdiction==0\" style=\"border-bottom: 0.1rem solid #F1F1F3;\">\n      <div class=\"row\" style=\"margin-top: 1.65rem\">\n        <div class=\"query-container\">\n          <img src=\"../../../assets/img/查找.svg\" style=\"width: 0.81rem;height: 0.81rem;margin: 0 0.4rem 0 0.4rem\">\n          <input type=\"text\" v-model=\"inputId\" placeholder=\"输入用户名查找\" class=\"query-input\">\n        </div>\n        <button class=\"query-btn\" @click=\"queryUser\">查询</button>\n        <div style=\"display: flex;justify-content: flex-end;width: 100%\">\n          <div style=\"font-size: 1.89rem;color:#43425D;\">用户管理</div>\n        </div>\n      </div>\n      <div style=\"overflow-y: auto;overflow-x:hidden;padding-top: 1.35rem;height: 38rem;\">\n        <table>\n          <tr class=\"user-list-head center\">\n            <td style=\"width: 3rem;\" class=\"center\">#</td>\n            <td style=\"width: 11rem\" class=\"center\">用户名</td>\n            <td style=\"width: 11rem\" class=\"center\">姓名</td>\n            <td style=\"width: 9rem\" class=\"center\">昵称</td>\n            <td style=\"width: 10rem\" class=\"center\">手机号</td>\n            <td style=\"width: 9rem\" class=\"center\">性别</td>\n            <td style=\"width: 10rem\" class=\"center\">权限</td>\n            <td style=\"width: 9rem\" class=\"center\">操作</td>\n          </tr>\n          <div v-for=\"(item,index) in userList\" :key=\"index\">\n            <tr class=\"user-list-head center\"\n                style=\"background: white;color: #4D4F5C\" v-if=\"item.ifEdit\">\n              <td style=\"width: 3rem;\" class=\"center\">{{ index + 1 }}</td>\n              <td style=\"width: 11rem\" class=\"center\"><input class=\"center user-input\" type=\"text\"\n                                                             v-model=\"item.id\"></td>\n              <td style=\"width: 11rem\" class=\"center\"><input class=\"center user-input\" type=\"text\"\n                                                             v-model=\"item.name\"></td>\n              <td style=\"width: 8rem\" class=\"center\"><input class=\"center user-input\" type=\"text\"\n                                                            v-model=\"item.nname\"></td>\n              <td style=\"width: 11rem\" class=\"center\"><input class=\"center user-input\" type=\"text\"\n                                                             v-model=\"item.number\"></td>\n              <td style=\"width: 8rem\" class=\"center\">\n                <select name=\"gender\" v-model=\"item.gender\" class=\"center user-input\">\n                  <option value=\"男\">男</option>\n                  <option value=\"女\">女</option>\n                </select>\n              </td>\n              <td style=\"width: 11rem\" class=\"center\">\n                <select name=\"gender\" v-model=\"item.jurisdiction\" class=\"center user-input\">\n                  <option value=\"0\">管理员</option>\n                  <option value=\"1\">VIP</option>\n                </select>\n              </td>\n              <td style=\"width: 9rem\" class=\"center\">\n                <button class=\"center user-list-edit-btn\" @click=\"userSubmit(index)\">提交</button>\n                <button style=\"color: red;border: 0.06rem solid red;\" class=\"center user-list-edit-btn\"\n                        @click=\"userCancel(index)\">取消\n                </button>\n              </td>\n            </tr>\n            <tr class=\"user-list-head center\"\n                style=\"background: white;color: #4D4F5C\" v-else>\n              <td style=\"width: 3rem;\" class=\"center\">{{ index + 1 }}</td>\n\n              <td style=\"width: 11rem\" class=\"center\">{{ item.id }}</td>\n\n              <td style=\"width: 11rem\" class=\"center\">{{ item.name }}</td>\n              <td style=\"width: 9rem\" class=\"center\">{{ item.nname }}</td>\n              <td style=\"width: 10rem\" class=\"center\">{{ item.number }}</td>\n              <td style=\"width: 9rem\" class=\"center\">{{ item.gender }}</td>\n              <td style=\"width: 10rem\" class=\"center\">{{ item.jurisdiction == 0 ? '管理员' : 'VIP' }}</td>\n              <td style=\"width: 9rem\" class=\"center\">\n                <button class=\"center user-list-edit-btn\" @click=\"userEdit(index)\">编辑</button>\n                <button style=\"color: red;border: 0.06rem solid red;\" class=\"center user-list-edit-btn\"\n                        @click=\"userDelete(index)\">删除\n                </button>\n              </td>\n            </tr>\n          </div>\n        </table>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {getUserList, queryUserById, deleteUser, changeUserInfo} from '../../../api/UserManagement'\n\nexport default {\n  name: \"index\",\n  data() {\n    return {\n      //用户列表数组\n      userList: [],\n      //通过输入ID查找用户_id\n      inputId: '',\n      //从localstorege读取用户权限\n      jurisdiction: JSON.parse(localStorage.getItem('bdi_iot_user')).jurisdiction\n    }\n  },\n  methods: {\n    //查找用户请求\n    queryUser() {\n      queryUserById(this, this.inputId)\n    },\n    //修改用户信息后检查是否合法并提交\n    userSubmit(index) {\n      let errmsg = ''\n      let bool1 = /^[a-zA-Z0-9]\\w{5,10}$/.test(this.userList[index].id)\n      let bool2 = /^1[3-9]\\d{9}$/.test(this.userList[index].number)\n      if (!bool1) {\n        errmsg += 'id不合法,请输入6-10位字母数字或下划线.'\n      }\n      if (!bool2) {\n        errmsg += '手机号不合法,请重新输入.'\n      }\n      if (bool1 && bool2) {\n        changeUserInfo(this, JSON.parse(sessionStorage.getItem('bdi_iot_userList'))[index].id, this.userList[index])\n        this.userList[index].ifEdit = false\n      } else {\n        alert('修改失败!' + errmsg)\n      }\n    },\n    //供给接口调用  判断是否修改成功\n    change(bool, errmsg) {\n      if (bool) {\n        alert('修改成功！')\n        this.getUser()\n      } else {\n        alert('修改失败！' + errmsg)\n      }\n    },\n    //编辑用户发起函数\n    userEdit(index) {\n      this.userList[index].ifEdit = true\n      this.$forceUpdate()\n    },\n    //取消编辑用户  恢复用户信息\n    userCancel(index) {\n      this.userList[index] = JSON.parse(sessionStorage.getItem('bdi_iot_userList'))[index]\n      this.userList[index].ifEdit = false\n      this.$forceUpdate()\n    },\n    //删除用户发起函数\n    userDelete(index) {\n      let temp = confirm(`你确认要删除用户${this.userList[index].id}吗？`)\n      if (temp) {\n        deleteUser(this.userList[index].id, this)\n      }\n    },\n    //获取用户列表请求\n    getUser() {\n      if (this.jurisdiction == 0) {\n        getUserList(this)\n      }\n    }\n  },\n  mounted() {\n  },\n  watch: {\n    //若通过id查找用户的id值为空，发起获取所有用户列表请求\n    inputId: {\n      handler(newVal) {\n        if (newVal == '') {\n          this.getUser()\n        }\n      },\n      deep: true,\n      immediate: true\n    }\n  }\n}\n</script>\n\n<style scoped>\n.row {\n  display: flex;\n  flex-direction: row;\n}\n\n.user-list-head {\n  width: 100%;\n  height: 3.04rem;\n  background: #F5F6FA;\n  color: #A3A6B4;\n  font-size: 0.74rem;\n}\n\n.center {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.user-list-edit-btn {\n  width: 2.56rem;\n  height: 1.55rem;\n  background: #FFFFFF;\n  color: #3B86FF;\n  border: 0.06rem solid #3B86FF;\n  font-size: 0.74rem;\n  margin-left: 0.3rem;\n}\n\n.user-input {\n  height: 1.6rem;\n  width: 5rem;\n}\n\n.query-container {\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  height: 1.95rem;\n  width: 15.13rem;\n  border: 0.06rem solid #43425D;\n}\n\n.query-input {\n  height: 1.5rem;\n  width: 84%;\n  margin: 0;\n  border: none;\n}\n\n.query-btn {\n  height: 1.95rem;\n  width: 4.05rem;\n  background: #43425D;\n  color: white;\n  font-size: 0.87rem;\n  margin-left: 1rem;\n}\n</style>"],"sourceRoot":"src/components/UserManagement/Manage"}]}