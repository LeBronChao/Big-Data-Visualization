{"remainingRequest":"/Users/lebronchao/Desktop/Web Project/Big_Data_Visualization/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lebronchao/Desktop/Web Project/Big_Data_Visualization/src/components/UserManagement/Manage/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lebronchao/Desktop/Web Project/Big_Data_Visualization/src/components/UserManagement/Manage/index.vue","mtime":1599910315963},{"path":"/Users/lebronchao/Desktop/Web Project/Big_Data_Visualization/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lebronchao/Desktop/Web Project/Big_Data_Visualization/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/lebronchao/Desktop/Web Project/Big_Data_Visualization/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lebronchao/Desktop/Web Project/Big_Data_Visualization/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7Z2V0VXNlckxpc3QsIHF1ZXJ5VXNlckJ5SWQsIGRlbGV0ZVVzZXIsIGNoYW5nZVVzZXJJbmZvfSBmcm9tICcuLi8uLi8uLi9hcGkvVXNlck1hbmFnZW1lbnQnCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiaW5kZXgiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1c2VyTGlzdDogW10sCiAgICAgIGlucHV0SWQ6ICcnLAogICAgICBqdXJpc2RpY3Rpb246SlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYmRpX2lvdF91c2VyJykpLmp1cmlzZGljdGlvbgogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgcXVlcnlVc2VyKCl7CiAgICAgIHF1ZXJ5VXNlckJ5SWQodGhpcyx0aGlzLmlucHV0SWQpCiAgICB9LAogICAgdXNlclN1Ym1pdChpbmRleCkgewogICAgICBsZXQgZXJybXNnPScnCiAgICAgIGxldCBib29sMT0vXlthLXpBLVowLTldXHd7NSwxMH0kLy50ZXN0KHRoaXMudXNlckxpc3RbaW5kZXhdLmlkKQogICAgICBsZXQgYm9vbDI9L14xWzMtOV1cZHs5fSQvLnRlc3QodGhpcy51c2VyTGlzdFtpbmRleF0ubnVtYmVyKQogICAgICBpZighYm9vbDEpewogICAgICAgIGVycm1zZys9J2lk5LiN5ZCI5rOVLOivt+i+k+WFpTYtMTDkvY3lrZfmr43mlbDlrZfmiJbkuIvliJLnur8uJwogICAgICB9CiAgICAgIGlmKCFib29sMil7CiAgICAgICAgZXJybXNnKz0n5omL5py65Y+35LiN5ZCI5rOVLOivt+mHjeaWsOi+k+WFpS4nCiAgICAgIH0KICAgICAgaWYoYm9vbDEgJiYgYm9vbDIpewogICAgICAgIGNoYW5nZVVzZXJJbmZvKHRoaXMsSlNPTi5wYXJzZShzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdiZGlfaW90X3VzZXJMaXN0JykpW2luZGV4XS5pZCx0aGlzLnVzZXJMaXN0W2luZGV4XSkKICAgICAgICB0aGlzLnVzZXJMaXN0W2luZGV4XS5pZkVkaXQgPSBmYWxzZQogICAgICB9ZWxzZXsKICAgICAgICBhbGVydCgn5L+u5pS55aSx6LSlIScrZXJybXNnKQogICAgICB9CiAgICB9LAogICAgY2hhbmdlKGJvb2wsZXJybXNnKXsKICAgICAgaWYoYm9vbCl7CiAgICAgICAgYWxlcnQoJ+S/ruaUueaIkOWKn++8gScpCiAgICAgICAgdGhpcy5nZXRVc2VyKCkKICAgICAgfWVsc2V7CiAgICAgICAgYWxlcnQoJ+S/ruaUueWksei0pe+8gScrZXJybXNnKQogICAgICB9CiAgICB9LAogICAgdXNlckVkaXQoaW5kZXgpIHsKICAgICAgdGhpcy51c2VyTGlzdFtpbmRleF0uaWZFZGl0ID0gdHJ1ZQogICAgICB0aGlzLiRmb3JjZVVwZGF0ZSgpCiAgICB9LAogICAgdXNlckNhbmNlbChpbmRleCkgewogICAgICB0aGlzLnVzZXJMaXN0PUpTT04ucGFyc2Uoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnYmRpX2lvdF91c2VyTGlzdCcpKQogICAgICB0aGlzLnVzZXJMaXN0W2luZGV4XS5pZkVkaXQgPSBmYWxzZQogICAgICB0aGlzLiRmb3JjZVVwZGF0ZSgpCiAgICB9LAogICAgdXNlckRlbGV0ZShpbmRleCkgewogICAgICBsZXQgdGVtcD1jb25maXJtKGDkvaDnoa7orqTopoHliKDpmaTnlKjmiLcke3RoaXMudXNlckxpc3RbaW5kZXhdLmlkfeWQl++8n2ApCiAgICAgIGlmKHRlbXApewogICAgICAgIGRlbGV0ZVVzZXIodGhpcy51c2VyTGlzdFtpbmRleF0uaWQpCiAgICAgICAgdGhpcy4kcm91dGVyLmdvKDApCiAgICAgIH0KICAgIH0sCiAgICBnZXRVc2VyKCl7CiAgICAgIGlmKHRoaXMuanVyaXNkaWN0aW9uPT0wKXsKICAgICAgICBnZXRVc2VyTGlzdCh0aGlzKQogICAgICB9CiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogIH0sCiAgd2F0Y2g6ewogICAgaW5wdXRJZDp7CiAgICAgIGhhbmRsZXIobmV3VmFsKXsKICAgICAgICBpZihuZXdWYWw9PScnKXsKICAgICAgICAgIHRoaXMuZ2V0VXNlcigpCiAgICAgICAgfQogICAgICB9LAogICAgICBkZWVwOnRydWUsCiAgICAgIGltbWVkaWF0ZTp0cnVlCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/UserManagement/Manage","sourcesContent":["<template>\n  <div>\n    <div class=\"user-bottom\" v-if=\"jurisdiction==0\" style=\"border-bottom: 0.1rem solid #F1F1F3;\">\n      <div class=\"row\" style=\"margin-top: 1.65rem\">\n        <div class=\"query-container\">\n          <img src=\"../../../assets/img/查找.svg\" style=\"width: 0.81rem;height: 0.81rem;margin: 0 0.4rem 0 0.4rem\">\n          <input type=\"text\" v-model=\"inputId\" placeholder=\"输入用户名查找\" class=\"query-input\">\n        </div>\n        <button class=\"query-btn\" @click=\"queryUser\">查询</button>\n        <div style=\"display: flex;justify-content: flex-end;width: 100%\">\n          <div style=\"font-size: 1.89rem;color:#43425D;\">用户管理</div>\n        </div>\n      </div>\n      <table style=\"padding-top: 1.35rem;height: 38rem;overflow: scroll\">\n        <tr class=\"user-list-head center\">\n          <td style=\"width: 3rem;\" class=\"center\">#</td>\n          <td style=\"width: 11rem\" class=\"center\">用户名</td>\n          <td style=\"width: 11rem\" class=\"center\">姓名</td>\n          <td style=\"width: 9rem\" class=\"center\">昵称</td>\n          <td style=\"width: 10rem\" class=\"center\">手机号</td>\n          <td style=\"width: 9rem\" class=\"center\">性别</td>\n          <td style=\"width: 10rem\" class=\"center\">权限</td>\n          <td style=\"width: 9rem\" class=\"center\">操作</td>\n        </tr>\n        <div v-for=\"(item,index) in userList\" :key=\"index\">\n          <tr class=\"user-list-head center\"\n              style=\"background: white;color: #4D4F5C\" v-if=\"item.ifEdit\">\n            <td style=\"width: 3rem;\" class=\"center\">{{ index + 1 }}</td>\n            <td style=\"width: 11rem\" class=\"center\"><input class=\"center user-input\" type=\"text\"\n                                                           v-model=\"item.id\"></td>\n            <td style=\"width: 11rem\" class=\"center\"><input class=\"center user-input\" type=\"text\"\n                                                           v-model=\"item.name\"></td>\n            <td style=\"width: 8rem\" class=\"center\"><input class=\"center user-input\" type=\"text\"\n                                                          v-model=\"item.nname\"></td>\n            <td style=\"width: 11rem\" class=\"center\"><input class=\"center user-input\" type=\"text\"\n                                                           v-model=\"item.number\"></td>\n            <td style=\"width: 8rem\" class=\"center\">\n              <select name=\"gender\" v-model=\"item.gender\" class=\"center user-input\">\n                <option value=\"男\">男</option>\n                <option value=\"女\">女</option>\n              </select>\n            </td>\n            <td style=\"width: 11rem\" class=\"center\">\n              <select name=\"gender\" v-model=\"item.jurisdiction\" class=\"center user-input\">\n                <option value=\"0\">管理员</option>\n                <option value=\"1\">VIP</option>\n              </select>\n            </td>\n            <td style=\"width: 9rem\" class=\"center\">\n              <button class=\"center user-list-edit-btn\" @click=\"userSubmit(index)\">提交</button>\n              <button style=\"color: red;border: 0.06rem solid red;\" class=\"center user-list-edit-btn\"\n                      @click=\"userCancel(index)\">取消\n              </button>\n            </td>\n          </tr>\n          <tr class=\"user-list-head center\"\n              style=\"background: white;color: #4D4F5C\" v-else>\n            <td style=\"width: 3rem;\" class=\"center\">{{ index + 1 }}</td>\n\n            <td style=\"width: 11rem\" class=\"center\">{{ item.id }}</td>\n\n            <td style=\"width: 11rem\" class=\"center\">{{ item.name }}</td>\n            <td style=\"width: 9rem\" class=\"center\">{{ item.nname }}</td>\n            <td style=\"width: 10rem\" class=\"center\">{{ item.number }}</td>\n            <td style=\"width: 9rem\" class=\"center\">{{ item.gender }}</td>\n            <td style=\"width: 10rem\" class=\"center\">{{ item.jurisdiction == 0 ? '管理员' : 'VIP' }}</td>\n            <td style=\"width: 9rem\" class=\"center\">\n              <button class=\"center user-list-edit-btn\" @click=\"userEdit(index)\">编辑</button>\n              <button style=\"color: red;border: 0.06rem solid red;\" class=\"center user-list-edit-btn\"\n                      @click=\"userDelete(index)\">删除\n              </button>\n            </td>\n          </tr>\n        </div>\n      </table>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {getUserList, queryUserById, deleteUser, changeUserInfo} from '../../../api/UserManagement'\nexport default {\n  name: \"index\",\n  data() {\n    return {\n      userList: [],\n      inputId: '',\n      jurisdiction:JSON.parse(localStorage.getItem('bdi_iot_user')).jurisdiction\n    }\n  },\n  methods: {\n    queryUser(){\n      queryUserById(this,this.inputId)\n    },\n    userSubmit(index) {\n      let errmsg=''\n      let bool1=/^[a-zA-Z0-9]\\w{5,10}$/.test(this.userList[index].id)\n      let bool2=/^1[3-9]\\d{9}$/.test(this.userList[index].number)\n      if(!bool1){\n        errmsg+='id不合法,请输入6-10位字母数字或下划线.'\n      }\n      if(!bool2){\n        errmsg+='手机号不合法,请重新输入.'\n      }\n      if(bool1 && bool2){\n        changeUserInfo(this,JSON.parse(sessionStorage.getItem('bdi_iot_userList'))[index].id,this.userList[index])\n        this.userList[index].ifEdit = false\n      }else{\n        alert('修改失败!'+errmsg)\n      }\n    },\n    change(bool,errmsg){\n      if(bool){\n        alert('修改成功！')\n        this.getUser()\n      }else{\n        alert('修改失败！'+errmsg)\n      }\n    },\n    userEdit(index) {\n      this.userList[index].ifEdit = true\n      this.$forceUpdate()\n    },\n    userCancel(index) {\n      this.userList=JSON.parse(sessionStorage.getItem('bdi_iot_userList'))\n      this.userList[index].ifEdit = false\n      this.$forceUpdate()\n    },\n    userDelete(index) {\n      let temp=confirm(`你确认要删除用户${this.userList[index].id}吗？`)\n      if(temp){\n        deleteUser(this.userList[index].id)\n        this.$router.go(0)\n      }\n    },\n    getUser(){\n      if(this.jurisdiction==0){\n        getUserList(this)\n      }\n    }\n  },\n  mounted() {\n  },\n  watch:{\n    inputId:{\n      handler(newVal){\n        if(newVal==''){\n          this.getUser()\n        }\n      },\n      deep:true,\n      immediate:true\n    }\n  }\n}\n</script>\n\n<style scoped>\n.row {\n  display: flex;\n  flex-direction: row;\n}\n\n.user-list-head {\n  width: 100%;\n  height: 3.04rem;\n  background: #F5F6FA;\n  color: #A3A6B4;\n  font-size: 0.74rem;\n}\n\n.center {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.user-list-edit-btn {\n  width: 2.56rem;\n  height: 1.55rem;\n  background: #FFFFFF;\n  color: #3B86FF;\n  border: 0.06rem solid #3B86FF;\n  font-size: 0.74rem;\n  margin-left: 0.3rem;\n}\n\n.user-input {\n  height: 1.6rem;\n  width: 5rem;\n}\n\n.query-container {\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  height: 1.95rem;\n  width: 15.13rem;\n  border: 0.06rem solid #43425D;\n}\n\n.query-input {\n  height: 1.5rem;\n  width: 84%;\n  margin: 0;\n  border: none;\n}\n\n.query-btn {\n  height: 1.95rem;\n  width: 4.05rem;\n  background: #43425D;\n  color: white;\n  font-size: 0.87rem;\n  margin-left: 1rem;\n}\n</style>"]}]}